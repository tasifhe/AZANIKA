name: Keep Supabase Active

on:
  schedule:
    # Runs every 5 days at 8:00 AM UTC
    - cron: '0 8 */5 * *'
  workflow_dispatch: # Allows manual trigger from GitHub Actions tab

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Backend API
        run: |
          echo "Pinging API to keep Supabase active..."
          curl -f -s -o /dev/null -w "HTTP Status: %{http_code}\n" https://azanika-server.onrender.com/api/products || echo "Ping completed"
          
      - name: Log Success
        run: echo "Keep-alive ping successful at $(date)"
